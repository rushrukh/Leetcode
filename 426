// TC O(N), SC O(N) - recursive call stack 

class Solution {
public:
    Node *first = NULL, *last = NULL;
    Node* treeToDoublyList(Node* root) {
        if(!root) return root;
        Node* tmp = treeToDoublyListHelper(root);
        first -> left = last;
        last -> right = first;
        
        return first;
    }
    Node* treeToDoublyListHelper(Node* root) {
        if(!root) return root;
        treeToDoublyListHelper(root -> left);
        
        if(!first)
            first = root;
        
        if(last) {
            root -> left = last;
            last -> right = root;
        }
        last = root;
        
        treeToDoublyListHelper(root -> right);
        return first;
    }
};
